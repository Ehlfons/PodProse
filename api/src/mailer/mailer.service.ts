// mailer.service.ts

import { Injectable } from '@nestjs/common';
import * as nodemailer from 'nodemailer';
import mailerConfig from './mailer.config';
import { head } from 'superagent';

@Injectable()
export class MailerService {
  private transporter;

  constructor() {
    this.transporter = nodemailer.createTransport(mailerConfig);
  }

  async sendEmail(to: string, subject: string, text: string) {
    
    const mailOptions = {
      from: mailerConfig.auth.user,
      to,
      subject,
      text,
    };

    try {
      const info = await this.transporter.sendMail(mailOptions);
      console.log('Correo electrónico enviado:', info.response);
    } catch (error) {
      console.error('Error al enviar el correo:', error);
    }
  }

  async sendRegistrationEmail(to: string, username: string , token: string ) {
    const subject = 'Bienvenido a TRACKOW!';
    const URL_FRONT = process.env.FRONT;
    const link = `${URL_FRONT}/validar/${token}`;

    const html = `
    <html>
      <head>
        <style>
          body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
          }

          .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
          }

          h1 {
            color: #333;
            text-align: center;
          }

          p {
            margin-bottom: 20px;
          }

          img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
          }

          .footer {
            margin-top: 20px;
            color: #666;
            font-size: 14px;
            text-align: center;
          }
        </style>
      </head>
      <body>
        <div class="container">

          <svg id="New_Brand_3" data-name="New Brand 3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1817 266"><g id="TRACKOW"><path id="W" d="M1615.13,257.93a38.294,38.294,0,0,0,14.37-20.957l31.21-110.107q1.875-6.876,6.25-6.881,3.75,0,5.62,6.881l31.22,110.107a46.163,46.163,0,0,0,15.3,20.957,35.946,35.946,0,0,0,22.16,7.82,37.18,37.18,0,0,0,23.73-8.445A35.56,35.56,0,0,0,1778.1,235.1l38.71-203.321q1.245-12.507-7.18-20.645T1788.71,3a27.691,27.691,0,0,0-17.79,6.256,26.771,26.771,0,0,0-9.68,16.891l-22.48,137.008q-0.63,7.506-5.62,7.507-3.735,0-5.62-6.882L1697.55,53.045q-3.12-11.877-11.86-17.83a32.485,32.485,0,0,0-37.46,0q-8.76,5.953-11.87,17.83l-29.97,110.732q-1.875,6.891-5.62,6.882-4.365,0-5.62-7.507L1572.68,26.145A26.888,26.888,0,0,0,1545.2,3q-12.5,0-20.91,8.133t-7.19,20.645L1555.19,235.1a35.472,35.472,0,0,0,13.11,22.209,37.18,37.18,0,0,0,23.73,8.445A38.17,38.17,0,0,0,1615.13,257.93Z"></path><path id="O" d="M1419.21,247.929a128.979,128.979,0,0,0,45.88-48.147q16.845-30.323,16.85-67.845,0-38.133-16.54-67.844a123.325,123.325,0,0,0-45.57-46.9Q1390.805,0,1353.36,0t-66.79,17.2a127.173,127.173,0,0,0-46.51,46.9q-17.175,29.706-17.16,67.844,0,36.9,17.16,67.532a129.084,129.084,0,0,0,46.82,48.46q29.64,17.821,66.48,17.821T1419.21,247.929Zm-119.22-55.963q-20.925-23.757-20.91-60.029,0-36.257,20.91-59.4,20.9-23.126,53.37-23.136,31.83,0,52.12,23.136t20.28,59.4q0,36.271-20.28,60.029-20.3,23.77-52.12,23.761Q1320.885,215.727,1299.99,191.966Z"></path><path id="K" d="M1046.3,258.243q7.815-7.507,7.82-19.393V194.432a55.387,55.387,0,0,1,1.87-15.64q1.875-6.247,8.75-13.138l5.01-5,77.51,95.092q9.99,10,21.88,10.009,11.25,0,20-8.445t8.75-19.707a41.391,41.391,0,0,0-1.25-10.009,20.392,20.392,0,0,0-5.62-9.384l-83.14-95.092,74.38-74.447q8.13-8.123,8.13-18.142,0-11.261-8.75-19.394A29.361,29.361,0,0,0,1161.01,3q-11.25,0-21.25,10.01l-73.14,78.2c-2.5,2.923-4.8,4.379-6.88,4.379q-5.625,0-5.62-10.635V29.9q0-11.877-7.82-19.394T1025.99,3a28.4,28.4,0,0,0-20.01,7.507q-8.13,7.507-8.122,19.394V238.85q0,11.891,8.122,19.393a28.4,28.4,0,0,0,20.01,7.507Q1038.485,265.75,1046.3,258.243Z"></path><path id="C" d="M962.852,218.853a25.474,25.474,0,0,0-6.556-17.821q-6.557-7.181-17.172-7.191a27.383,27.383,0,0,0-14.987,4.378q-9.994,7.5-26.226,12.5a103.906,103.906,0,0,1-30.6,5q-34.977,0-57.135-22.511t-22.168-61.9q0-36.888,21.543-58.778t54.014-21.885a111.88,111.88,0,0,1,23.1,2.814,159.7,159.7,0,0,1,24.352,7.191A33.547,33.547,0,0,0,921.64,62.53q11.855,0,19.045-8.441,7.172-8.441,7.181-18.446a25.261,25.261,0,0,0-3.435-12.818A25.139,25.139,0,0,0,933.5,13.131a124.638,124.638,0,0,0-31.534-10A190.025,190.025,0,0,0,867.939,0q-40.6,0-71.186,15.945a116.532,116.532,0,0,0-47.769,45.334q-17.181,29.4-17.171,70.033,0,38.778,17.484,69.408a124.719,124.719,0,0,0,48.081,47.835q30.587,17.19,69.312,17.195a174.379,174.379,0,0,0,47.457-6.878Q938.5,252,950.364,242.614q12.483-9.995,12.488-23.761h0Z"></path><path id="A" d="M518.366,261.373a32.9,32.9,0,0,0,11.275-12.506l17.54-49.4q1.248-3.752,5.638-3.752h84.567q4.376,0,5.011,3.752l18.167,48.773A22.857,22.857,0,0,0,670.9,261.061a29.643,29.643,0,0,0,14.721,4.064,29.2,29.2,0,0,0,19.419-7.5q8.765-7.5,8.77-20.635v-5a11.159,11.159,0,0,0-1.253-5L627.99,22.511A31.693,31.693,0,0,0,613.269,5.628,44.588,44.588,0,0,0,591.657,0a41.668,41.668,0,0,0-20.672,5.628,31.962,31.962,0,0,0-14.408,16.883L477.648,228.233a33.612,33.612,0,0,0-1.879,10.63,23.971,23.971,0,0,0,9.083,19.384q9.074,7.5,19.106,7.5A26.546,26.546,0,0,0,518.366,261.373Zm50.74-117.242a7.152,7.152,0,0,1-.627-6.566l15.661-44.4q3.759-10.625,9.4-10.63t9.4,10l16.287,44.4q1.248,4.381-.94,7.191a7.152,7.152,0,0,1-5.951,2.813H575.37Q570.979,146.944,569.106,144.131Z"></path><path id="R" d="M287.549,257.57a24.723,24.723,0,0,0,8.127-18.42V177.958q0-12.483,12.5-12.488H324.43q13.743,0,24.067,6.556t16.565,21.542l23.754,56.822q3.752,8.123,10.315,11.864A26.787,26.787,0,0,0,412.57,266a29.883,29.883,0,0,0,19.379-7.181A22.761,22.761,0,0,0,440.7,240.4q0-4.99-3.125-12.488l-20.629-47.455a57.337,57.337,0,0,0-27.5-29.972q20-10.611,30.63-28.1A70.892,70.892,0,0,0,430.7,84.92q0-33.718-23.442-56.2T345.684,6.244H283.173q-19.383,0-30.942,11.239-11.575,11.239-11.565,29.347V239.15a24.687,24.687,0,0,0,8.127,18.42A27.955,27.955,0,0,0,287.549,257.57Zm8.127-148.3V65.564q0-9.366,9.376-9.366h38.132q15.618,0,24.691,8.43,9.055,8.43,9.064,22.791,0,13.742-9.064,22.479t-24.691,8.742H305.052q-9.377,0-9.376-9.367h0Z"></path><path id="T" d="M123.459,258.2q7.809-7.172,7.813-19.045V76.179q0-18.732,18.754-18.732h30q11.867,0,19.065-7.181,7.179-7.171,7.189-18.42T199.1,13.425Q191.9,6.254,180.031,6.244H25.629q-11.252,0-18.441,7.181T0,31.845q0,11.239,7.189,18.42t18.441,7.181H56.26q18.753,0,18.753,18.732V239.15q0,11.869,8.126,19.045t20,7.181Q115.64,265.376,123.459,258.2Z"></path></g><path id="TimeCheck" fill="#f04a00" stroke="#f04a00" stroke-linecap="round" stroke-linejoin="round" stroke-width="5px" d="M1344.51,129.524c26.31-26.357,94.53-94.712,120.58-120.81,9.87-9.891,20.45.7,20.45,0.7s10.63,10.545.72,20.48c-25.58,25.624-93.95,94.128-120.58,120.81-10.75,10.774-21.19.035-21.16,0.008S1333.91,140.148,1344.51,129.524Zm-13.1-33.193c26.3,26.326,5.68,5.7,31.72,31.77,9.86,9.88-.7,20.473-0.7,20.473s-10.52,10.638-20.43.714c-25.56-25.6-5.1-5.119-31.72-31.771-10.74-10.762-.03-21.2,0-21.178S1320.81,85.719,1331.41,96.331Z"></path></svg>
          <h1>¡Bienvenido ${username}!</h1>
          <p>¡Gracias por registrarte en nuestra aplicación!</p>
          <p>Esperamos que disfrutes de tu experiencia con nosotros.</p>
          <p>Verifíca tu cuenta : <a target="_blank" href="${link}">Haz clic aquí para validar tu cuenta</a> </p>
          <div class="footer">
            <p>Saludos,<br/>El equipo de TRACKOW</p>
          </div>
        </div>
      </body>
    </html>
  `;

  

    const mailOptions = {
      from: mailerConfig.auth.name,
      to,
      subject,
      html,
    };

    try {
      const info = await this.transporter.sendMail(mailOptions);
      console.log('Correo electrónico enviado:', info.response);
    } catch (error) {
      console.error('Error al enviar el correo:', error);
    }
  }

  async sendResetPassword(to: string, username: string , token: string ) {
    const subject = '¡Es Momento de cambiar tu contraseña!';
    const URL_FRONT = process.env.FRONT;
    const link = `${URL_FRONT}/reset/${token}`;

    const html = `
    <html>
      <head>
        <style>
          body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
          }

          .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
          }

          h1 {
            color: #333;
            text-align: center;
          }

          p {
            margin-bottom: 20px;
          }

          img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
          }

          .footer {
            margin-top: 20px;
            color: #666;
            font-size: 14px;
            text-align: center;
          }
        </style>
      </head>
      <body>
        <div class="container">
        <svg id="New_Brand_3" data-name="New Brand 3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1817 266"><g id="TRACKOW"><path id="W" d="M1615.13,257.93a38.294,38.294,0,0,0,14.37-20.957l31.21-110.107q1.875-6.876,6.25-6.881,3.75,0,5.62,6.881l31.22,110.107a46.163,46.163,0,0,0,15.3,20.957,35.946,35.946,0,0,0,22.16,7.82,37.18,37.18,0,0,0,23.73-8.445A35.56,35.56,0,0,0,1778.1,235.1l38.71-203.321q1.245-12.507-7.18-20.645T1788.71,3a27.691,27.691,0,0,0-17.79,6.256,26.771,26.771,0,0,0-9.68,16.891l-22.48,137.008q-0.63,7.506-5.62,7.507-3.735,0-5.62-6.882L1697.55,53.045q-3.12-11.877-11.86-17.83a32.485,32.485,0,0,0-37.46,0q-8.76,5.953-11.87,17.83l-29.97,110.732q-1.875,6.891-5.62,6.882-4.365,0-5.62-7.507L1572.68,26.145A26.888,26.888,0,0,0,1545.2,3q-12.5,0-20.91,8.133t-7.19,20.645L1555.19,235.1a35.472,35.472,0,0,0,13.11,22.209,37.18,37.18,0,0,0,23.73,8.445A38.17,38.17,0,0,0,1615.13,257.93Z"></path><path id="O" d="M1419.21,247.929a128.979,128.979,0,0,0,45.88-48.147q16.845-30.323,16.85-67.845,0-38.133-16.54-67.844a123.325,123.325,0,0,0-45.57-46.9Q1390.805,0,1353.36,0t-66.79,17.2a127.173,127.173,0,0,0-46.51,46.9q-17.175,29.706-17.16,67.844,0,36.9,17.16,67.532a129.084,129.084,0,0,0,46.82,48.46q29.64,17.821,66.48,17.821T1419.21,247.929Zm-119.22-55.963q-20.925-23.757-20.91-60.029,0-36.257,20.91-59.4,20.9-23.126,53.37-23.136,31.83,0,52.12,23.136t20.28,59.4q0,36.271-20.28,60.029-20.3,23.77-52.12,23.761Q1320.885,215.727,1299.99,191.966Z"></path><path id="K" d="M1046.3,258.243q7.815-7.507,7.82-19.393V194.432a55.387,55.387,0,0,1,1.87-15.64q1.875-6.247,8.75-13.138l5.01-5,77.51,95.092q9.99,10,21.88,10.009,11.25,0,20-8.445t8.75-19.707a41.391,41.391,0,0,0-1.25-10.009,20.392,20.392,0,0,0-5.62-9.384l-83.14-95.092,74.38-74.447q8.13-8.123,8.13-18.142,0-11.261-8.75-19.394A29.361,29.361,0,0,0,1161.01,3q-11.25,0-21.25,10.01l-73.14,78.2c-2.5,2.923-4.8,4.379-6.88,4.379q-5.625,0-5.62-10.635V29.9q0-11.877-7.82-19.394T1025.99,3a28.4,28.4,0,0,0-20.01,7.507q-8.13,7.507-8.122,19.394V238.85q0,11.891,8.122,19.393a28.4,28.4,0,0,0,20.01,7.507Q1038.485,265.75,1046.3,258.243Z"></path><path id="C" d="M962.852,218.853a25.474,25.474,0,0,0-6.556-17.821q-6.557-7.181-17.172-7.191a27.383,27.383,0,0,0-14.987,4.378q-9.994,7.5-26.226,12.5a103.906,103.906,0,0,1-30.6,5q-34.977,0-57.135-22.511t-22.168-61.9q0-36.888,21.543-58.778t54.014-21.885a111.88,111.88,0,0,1,23.1,2.814,159.7,159.7,0,0,1,24.352,7.191A33.547,33.547,0,0,0,921.64,62.53q11.855,0,19.045-8.441,7.172-8.441,7.181-18.446a25.261,25.261,0,0,0-3.435-12.818A25.139,25.139,0,0,0,933.5,13.131a124.638,124.638,0,0,0-31.534-10A190.025,190.025,0,0,0,867.939,0q-40.6,0-71.186,15.945a116.532,116.532,0,0,0-47.769,45.334q-17.181,29.4-17.171,70.033,0,38.778,17.484,69.408a124.719,124.719,0,0,0,48.081,47.835q30.587,17.19,69.312,17.195a174.379,174.379,0,0,0,47.457-6.878Q938.5,252,950.364,242.614q12.483-9.995,12.488-23.761h0Z"></path><path id="A" d="M518.366,261.373a32.9,32.9,0,0,0,11.275-12.506l17.54-49.4q1.248-3.752,5.638-3.752h84.567q4.376,0,5.011,3.752l18.167,48.773A22.857,22.857,0,0,0,670.9,261.061a29.643,29.643,0,0,0,14.721,4.064,29.2,29.2,0,0,0,19.419-7.5q8.765-7.5,8.77-20.635v-5a11.159,11.159,0,0,0-1.253-5L627.99,22.511A31.693,31.693,0,0,0,613.269,5.628,44.588,44.588,0,0,0,591.657,0a41.668,41.668,0,0,0-20.672,5.628,31.962,31.962,0,0,0-14.408,16.883L477.648,228.233a33.612,33.612,0,0,0-1.879,10.63,23.971,23.971,0,0,0,9.083,19.384q9.074,7.5,19.106,7.5A26.546,26.546,0,0,0,518.366,261.373Zm50.74-117.242a7.152,7.152,0,0,1-.627-6.566l15.661-44.4q3.759-10.625,9.4-10.63t9.4,10l16.287,44.4q1.248,4.381-.94,7.191a7.152,7.152,0,0,1-5.951,2.813H575.37Q570.979,146.944,569.106,144.131Z"></path><path id="R" d="M287.549,257.57a24.723,24.723,0,0,0,8.127-18.42V177.958q0-12.483,12.5-12.488H324.43q13.743,0,24.067,6.556t16.565,21.542l23.754,56.822q3.752,8.123,10.315,11.864A26.787,26.787,0,0,0,412.57,266a29.883,29.883,0,0,0,19.379-7.181A22.761,22.761,0,0,0,440.7,240.4q0-4.99-3.125-12.488l-20.629-47.455a57.337,57.337,0,0,0-27.5-29.972q20-10.611,30.63-28.1A70.892,70.892,0,0,0,430.7,84.92q0-33.718-23.442-56.2T345.684,6.244H283.173q-19.383,0-30.942,11.239-11.575,11.239-11.565,29.347V239.15a24.687,24.687,0,0,0,8.127,18.42A27.955,27.955,0,0,0,287.549,257.57Zm8.127-148.3V65.564q0-9.366,9.376-9.366h38.132q15.618,0,24.691,8.43,9.055,8.43,9.064,22.791,0,13.742-9.064,22.479t-24.691,8.742H305.052q-9.377,0-9.376-9.367h0Z"></path><path id="T" d="M123.459,258.2q7.809-7.172,7.813-19.045V76.179q0-18.732,18.754-18.732h30q11.867,0,19.065-7.181,7.179-7.171,7.189-18.42T199.1,13.425Q191.9,6.254,180.031,6.244H25.629q-11.252,0-18.441,7.181T0,31.845q0,11.239,7.189,18.42t18.441,7.181H56.26q18.753,0,18.753,18.732V239.15q0,11.869,8.126,19.045t20,7.181Q115.64,265.376,123.459,258.2Z"></path></g><path id="TimeCheck" fill="#f04a00" stroke="#f04a00" stroke-linecap="round" stroke-linejoin="round" stroke-width="5px" d="M1344.51,129.524c26.31-26.357,94.53-94.712,120.58-120.81,9.87-9.891,20.45.7,20.45,0.7s10.63,10.545.72,20.48c-25.58,25.624-93.95,94.128-120.58,120.81-10.75,10.774-21.19.035-21.16,0.008S1333.91,140.148,1344.51,129.524Zm-13.1-33.193c26.3,26.326,5.68,5.7,31.72,31.77,9.86,9.88-.7,20.473-0.7,20.473s-10.52,10.638-20.43.714c-25.56-25.6-5.1-5.119-31.72-31.771-10.74-10.762-.03-21.2,0-21.178S1320.81,85.719,1331.41,96.331Z"></path></svg>
        <h1>¡Menuda Cabeza tienes ${username}!</h1>
        <p>¡Espero que esta vez no se te olvide!</p>

        <p>Aquí podras cambiar tu contraseña : <a target="_blank" href="${link}">Cambiar Contraseña</a> </p>
        <div class="footer">
          <p>Saludos,<br/>El equipo de TRACKOW</p>
        </div>
        </div>
      </body>
    </html>
  `;

  
    let mailOptions = {
      from: mailerConfig.auth.name,
      to,
      subject,
      html,
    };

    try {
      const info = await this.transporter.sendMail(mailOptions);
      console.log('Correo electrónico enviado:', info.response);
    } catch (error) {
      console.error('Error al enviar el correo:', error);
    }
  }

  async sendStatusRequest(updateRequest ) {
    let subject = '';
    let header = '';
    const fechaActual = updateRequest.date;


  
    
    let solicitud = `Este mensaje es para la solicitud oara los dias entre ${updateRequest.startDate} y ${updateRequest.endDate}  , de tipo ${updateRequest.type} con la descripción ${updateRequest.description}.`
    
    if ( updateRequest.status === "Aprobado"){
      subject = '¡Solicitud APROBADA!';
      header = ' Tu solicitud ha sido aprobada'

    }else {
      subject = '¡Solicitud RECHAZADA!';
      header = ` Tu solicitud ha sido rechazada , debido a que ${updateRequest.response}`
    }
    let to = updateRequest.user.email;
 

    const html = `
    <html>
      <head>
        <style>
          body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
          }

          .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
          }

          h1 {
            color: #333;
            text-align: center;
          }

          p {
            margin-bottom: 20px;
          }

          img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
          }

          .footer {
            margin-top: 20px;
            color: #666;
            font-size: 14px;
            text-align: center;
          }
        </style>
      </head>
      <body>
        <div class="container"> 
        <svg id="New_Brand_3" data-name="TRACKOW" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1817 266"><g id="TRACKOW"><path id="W" d="M1615.13,257.93a38.294,38.294,0,0,0,14.37-20.957l31.21-110.107q1.875-6.876,6.25-6.881,3.75,0,5.62,6.881l31.22,110.107a46.163,46.163,0,0,0,15.3,20.957,35.946,35.946,0,0,0,22.16,7.82,37.18,37.18,0,0,0,23.73-8.445A35.56,35.56,0,0,0,1778.1,235.1l38.71-203.321q1.245-12.507-7.18-20.645T1788.71,3a27.691,27.691,0,0,0-17.79,6.256,26.771,26.771,0,0,0-9.68,16.891l-22.48,137.008q-0.63,7.506-5.62,7.507-3.735,0-5.62-6.882L1697.55,53.045q-3.12-11.877-11.86-17.83a32.485,32.485,0,0,0-37.46,0q-8.76,5.953-11.87,17.83l-29.97,110.732q-1.875,6.891-5.62,6.882-4.365,0-5.62-7.507L1572.68,26.145A26.888,26.888,0,0,0,1545.2,3q-12.5,0-20.91,8.133t-7.19,20.645L1555.19,235.1a35.472,35.472,0,0,0,13.11,22.209,37.18,37.18,0,0,0,23.73,8.445A38.17,38.17,0,0,0,1615.13,257.93Z"></path><path id="O" d="M1419.21,247.929a128.979,128.979,0,0,0,45.88-48.147q16.845-30.323,16.85-67.845,0-38.133-16.54-67.844a123.325,123.325,0,0,0-45.57-46.9Q1390.805,0,1353.36,0t-66.79,17.2a127.173,127.173,0,0,0-46.51,46.9q-17.175,29.706-17.16,67.844,0,36.9,17.16,67.532a129.084,129.084,0,0,0,46.82,48.46q29.64,17.821,66.48,17.821T1419.21,247.929Zm-119.22-55.963q-20.925-23.757-20.91-60.029,0-36.257,20.91-59.4,20.9-23.126,53.37-23.136,31.83,0,52.12,23.136t20.28,59.4q0,36.271-20.28,60.029-20.3,23.77-52.12,23.761Q1320.885,215.727,1299.99,191.966Z"></path><path id="K" d="M1046.3,258.243q7.815-7.507,7.82-19.393V194.432a55.387,55.387,0,0,1,1.87-15.64q1.875-6.247,8.75-13.138l5.01-5,77.51,95.092q9.99,10,21.88,10.009,11.25,0,20-8.445t8.75-19.707a41.391,41.391,0,0,0-1.25-10.009,20.392,20.392,0,0,0-5.62-9.384l-83.14-95.092,74.38-74.447q8.13-8.123,8.13-18.142,0-11.261-8.75-19.394A29.361,29.361,0,0,0,1161.01,3q-11.25,0-21.25,10.01l-73.14,78.2c-2.5,2.923-4.8,4.379-6.88,4.379q-5.625,0-5.62-10.635V29.9q0-11.877-7.82-19.394T1025.99,3a28.4,28.4,0,0,0-20.01,7.507q-8.13,7.507-8.122,19.394V238.85q0,11.891,8.122,19.393a28.4,28.4,0,0,0,20.01,7.507Q1038.485,265.75,1046.3,258.243Z"></path><path id="C" d="M962.852,218.853a25.474,25.474,0,0,0-6.556-17.821q-6.557-7.181-17.172-7.191a27.383,27.383,0,0,0-14.987,4.378q-9.994,7.5-26.226,12.5a103.906,103.906,0,0,1-30.6,5q-34.977,0-57.135-22.511t-22.168-61.9q0-36.888,21.543-58.778t54.014-21.885a111.88,111.88,0,0,1,23.1,2.814,159.7,159.7,0,0,1,24.352,7.191A33.547,33.547,0,0,0,921.64,62.53q11.855,0,19.045-8.441,7.172-8.441,7.181-18.446a25.261,25.261,0,0,0-3.435-12.818A25.139,25.139,0,0,0,933.5,13.131a124.638,124.638,0,0,0-31.534-10A190.025,190.025,0,0,0,867.939,0q-40.6,0-71.186,15.945a116.532,116.532,0,0,0-47.769,45.334q-17.181,29.4-17.171,70.033,0,38.778,17.484,69.408a124.719,124.719,0,0,0,48.081,47.835q30.587,17.19,69.312,17.195a174.379,174.379,0,0,0,47.457-6.878Q938.5,252,950.364,242.614q12.483-9.995,12.488-23.761h0Z"></path><path id="A" d="M518.366,261.373a32.9,32.9,0,0,0,11.275-12.506l17.54-49.4q1.248-3.752,5.638-3.752h84.567q4.376,0,5.011,3.752l18.167,48.773A22.857,22.857,0,0,0,670.9,261.061a29.643,29.643,0,0,0,14.721,4.064,29.2,29.2,0,0,0,19.419-7.5q8.765-7.5,8.77-20.635v-5a11.159,11.159,0,0,0-1.253-5L627.99,22.511A31.693,31.693,0,0,0,613.269,5.628,44.588,44.588,0,0,0,591.657,0a41.668,41.668,0,0,0-20.672,5.628,31.962,31.962,0,0,0-14.408,16.883L477.648,228.233a33.612,33.612,0,0,0-1.879,10.63,23.971,23.971,0,0,0,9.083,19.384q9.074,7.5,19.106,7.5A26.546,26.546,0,0,0,518.366,261.373Zm50.74-117.242a7.152,7.152,0,0,1-.627-6.566l15.661-44.4q3.759-10.625,9.4-10.63t9.4,10l16.287,44.4q1.248,4.381-.94,7.191a7.152,7.152,0,0,1-5.951,2.813H575.37Q570.979,146.944,569.106,144.131Z"></path><path id="R" d="M287.549,257.57a24.723,24.723,0,0,0,8.127-18.42V177.958q0-12.483,12.5-12.488H324.43q13.743,0,24.067,6.556t16.565,21.542l23.754,56.822q3.752,8.123,10.315,11.864A26.787,26.787,0,0,0,412.57,266a29.883,29.883,0,0,0,19.379-7.181A22.761,22.761,0,0,0,440.7,240.4q0-4.99-3.125-12.488l-20.629-47.455a57.337,57.337,0,0,0-27.5-29.972q20-10.611,30.63-28.1A70.892,70.892,0,0,0,430.7,84.92q0-33.718-23.442-56.2T345.684,6.244H283.173q-19.383,0-30.942,11.239-11.575,11.239-11.565,29.347V239.15a24.687,24.687,0,0,0,8.127,18.42A27.955,27.955,0,0,0,287.549,257.57Zm8.127-148.3V65.564q0-9.366,9.376-9.366h38.132q15.618,0,24.691,8.43,9.055,8.43,9.064,22.791,0,13.742-9.064,22.479t-24.691,8.742H305.052q-9.377,0-9.376-9.367h0Z"></path><path id="T" d="M123.459,258.2q7.809-7.172,7.813-19.045V76.179q0-18.732,18.754-18.732h30q11.867,0,19.065-7.181,7.179-7.171,7.189-18.42T199.1,13.425Q191.9,6.254,180.031,6.244H25.629q-11.252,0-18.441,7.181T0,31.845q0,11.239,7.189,18.42t18.441,7.181H56.26q18.753,0,18.753,18.732V239.15q0,11.869,8.126,19.045t20,7.181Q115.64,265.376,123.459,258.2Z"></path></g><path id="TimeCheck" fill="#f04a00" stroke="#f04a00" stroke-linecap="round" stroke-linejoin="round" stroke-width="5px" d="M1344.51,129.524c26.31-26.357,94.53-94.712,120.58-120.81,9.87-9.891,20.45.7,20.45,0.7s10.63,10.545.72,20.48c-25.58,25.624-93.95,94.128-120.58,120.81-10.75,10.774-21.19.035-21.16,0.008S1333.91,140.148,1344.51,129.524Zm-13.1-33.193c26.3,26.326,5.68,5.7,31.72,31.77,9.86,9.88-.7,20.473-0.7,20.473s-10.52,10.638-20.43.714c-25.56-25.6-5.1-5.119-31.72-31.771-10.74-10.762-.03-21.2,0-21.178S1320.81,85.719,1331.41,96.331Z"></path></svg>
        <h1>¡Que tal ${updateRequest.user.name.split(" ")[0]}!</h1>
        <p>¡Espero que todo te vaya bien!</p>
        <h4>${header}</h4>
        <p>${solicitud}</p>

        
        <div class="footer"
          <p>Saludos,<br/>de tu JEFE!</p>
        </div>
        </div>
      </body>
    </html>
  `;

  

    const mailOptions = {
      from: mailerConfig.auth.name,
      to ,
      subject,
      html,
    };

    try {
      const info = await this.transporter.sendMail(mailOptions);
      console.log('Correo electrónico enviado:', info.response);
    } catch (error) {
      console.error('Error al enviar el correo:', error);
    }
  }





}
